{% extends 'base_generic.html' %}

{% block title %}<title>User List</title>{% endblock %}

{% block content %}
  <h1>User List</h1>
  <ul>
    {% for user in user_list %}
      <li>
        <strong>{{ user.id }}</strong> - {{ user.email }} - Total Aged Score: {% with user.pageviews.aggregate(Sum('aged_score')) as total_score %}{{ total_score.aged_score__sum|floatformat:1 }}{% endwith %}
        <ul>
          {% for pageview in user.pageviews.all %}
            <li>
              <a href="{{ pageview.wpid.link }}">{{ pageview.wpid.name }}</a> - Aged Score: {{ pageview.aged_score|floatformat:1 }}
            </li>
          {% endfor %}
        </ul>
      </li>
    {% endfor %}
  </ul>
{% endblock %}
